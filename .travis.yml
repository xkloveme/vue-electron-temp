
dist: trusty
sudo: required

language: node_js
node_js:
  - '10'

matrix:
  include:
    - os: linux
      before_install: # 为了支持打包rpm格式的包
          - sudo apt-get update
          - sudo apt-get install build-essential clang libdbus-1-dev libgtk2.0-dev \
                                  libnotify-dev libgnome-keyring-dev libgconf2-dev \
                                  libasound2-dev libcap-dev libcups2-dev libxtst-dev \
                                  libxss1 libnss3-dev gcc-multilib g++-multilib
          # - sudo apt-get install --no-install-recommends -y gcc-multilib g++-multilib
          # - sudo apt-get install --no-install-recommends -y rpm
    - os: osx

cache:
  directories:
    - node_modules

install:
  - npm install
  - npm install -g electron-installer-snap

script:
  - npm run lint
  - npm run release

branches:
  only:
    - master